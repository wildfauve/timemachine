<!DOCTYPE html>
  <head>
  	<meta charset="utf-8" />

  	<!-- Set the viewport width to device width for mobile -->
  	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

  	<title><%= content_for?(:title) ? yield(:title) : "TimeMachine" %></title>

  	<%= stylesheet_link_tag    "application" %>
  	<%= javascript_include_tag "vendor/modernizr" %>
    <%= csrf_meta_tags %>
  </head>

  <body>
	<nav class="top-bar">
	  <ul class="title-area">
	    <!-- Title Area -->
	    <li class="name">
	      <h1><a href="#">TimeMachine </a></h1>
	    </li>
	    <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
	    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
	  </ul>

	  <section class="top-bar-section">
	    <!-- Left Nav Section -->
	    <ul class="left">
	      <li class="divider"></li>
         <% if can? :manage, Employee %>
   	      <li class="active has-dropdown"><%= link_to 'Employees', employees_path%>
               <ul class="dropdown">
                  <li><%= link_to 'New', new_employee_path%></li>
               </ul>
            </li>
         <% else %>
            <% if current_user && current_user.employee %>
               <li><%= link_to "Time", employee_path(current_user.employee), data: {dropdown: "drop_time"} %></li>
               <ul id="drop_time" class="f-dropdown" data-dropdown-content>
                 <li><%= link_to 'Add Time', employee_path(current_user.employee)%></li>
                 <li><%= link_to 'Timesheet', by_employee_path(@employee, :state => :timesheet) %></li>
                 <li><%= link_to 'Edit Assignments', assignments_employee_path(@employee) %></li>
                 <li><%= link_to 'Expenses', employee_expenses_path(@employee) %></li>                     
               </ul>        
               <li><%= link_to "Expenses", employee_expenses_path(current_user.employee), data: {dropdown: "drop_expenses"} %></li>
               <ul id="drop_expenses" class="f-dropdown" data-dropdown-content>               
                   <li><%= link_to 'Expense', employee_expenses_path(@employee) %></li>                     
               </ul>
            <% end %>                  
         <% end %>
         <% if current_user && current_user.employee %>
            <li class="has-dropdown"><%= link_to "Assignments", assignments_employee_path(@employee) %>
               <ul class="dropdown">
                  <li><%= link_to 'Edit', assignments_employee_path(@employee) %></li>                     
               </ul>
            </li>         
         <% end %>
	      <li class="has-dropdown"><%= link_to 'Customers', customers_path %>
	        <ul class="dropdown">
              <% if can? :manage, Customer %>         
	             <li><%= link_to 'New', new_customer_path%></li>
                <% end %>
	           <li><%= link_to 'List', customers_path%></li>
	        </ul>
	      </li>
         <% if can? :manage, User %>
   	      <li class="has-dropdown"><%= link_to 'Assignments', assignments_path %>
   				<%= project_list %>
   			</li>
         <% end %>
         <% if can? :manage, User %>
   	      <li class="has-dropdown"><%= link_to 'Admin', admins_path %>
               <ul class="dropdown">
   	            <li><%= link_to 'Users', users_path%></li>
   	            <li><%= link_to 'New User', new_user_path%></li>               
               </ul>
   			</li>   
         <% end %>      
	      <li class="divider"></li>
	    </ul>

	    <!-- Right Nav Section -->
	    <ul class="right">
	      <li class="divider hide-for-small"></li>
	      <li class="divider"></li>
         <% if current_user  %>
            <% if current_user.employee %>
              <li>
                <%= link_to(current_user.name, employee_path(current_user.employee), data: {dropdown: "drop_user"})  %>
              </li>
            <% else%>
              <li>
                <%= link_to(current_user.name, admins_path, data: {dropdown: "drop_user"})  %>
              </li>            
            <% end %>                  
                <ul id="drop_user" class="f-dropdown" data-dropdown-content>
                  <li><%= link_to 'Logout', log_out_path%></li>
                </ul>        
         <% else %>
      	   <li ><%= link_to "Login", log_in_path %></li>
         <% end %>
	      <li class="has-form">
	        <form>
	          <div class="row collapse">
	            <div class="small-8 columns">
	              <input type="text">
	            </div>
	            <div class="small-4 columns">
	              <a href="#" class="alert button">Search</a>
	            </div>
	          </div>
	        </form>
	      </li>
	    </ul>
	  </section>
	</nav>
	<div class="row">
		<div class="small-10 small-uncentered columns">
         <% flash.each do |name, msg| %>
            <%= content_tag :div, msg, id: "flash_#{name}" %>
         <% end %>
			<%= yield %>
		</div>
		<div class="small-2 columns">
			Side Bar
		</div>
	</div>
    <%= javascript_include_tag "application" %>
  </body>
</html>
